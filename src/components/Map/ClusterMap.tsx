/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */
import { MarkerClusterer } from "@googlemaps/markerclusterer";

async function initMap() {
  // Request needed libraries.
  const { Map, InfoWindow } = (await google.maps.importLibrary(
    "maps"
  )) as google.maps.MapsLibrary;
  const { AdvancedMarkerElement, PinElement } =
    (await google.maps.importLibrary("marker")) as google.maps.MarkerLibrary;

  // 초기 기본 셋팅
  const map = new google.maps.Map(
    document.getElementById("map") as HTMLElement,
    {
      center: { lat: 37.49724, lng: 126.9851 },
      zoom: 1,
      mapId: "DEMO_MAP_ID",
      maxZoom: 16,
      scrollwheel: true,
      streetViewControl: false,
    }
  );

  const infoWindow = new google.maps.InfoWindow({
    content: "",
    disableAutoPan: true,
  });

  // Create an array of alphabetical characters used to label the markers.
  const labels = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

  // Add some markers to the map.
  const markers = locations.map((position, i) => {
    const label = labels[i % labels.length];
    const pinGlyph = new google.maps.marker.PinElement({
      glyph: label,
      glyphColor: "white",
    });
    const marker = new google.maps.marker.AdvancedMarkerElement({
      position,
      content: pinGlyph.element,
    });

    // markers can only be keyboard focusable when they have click listeners
    // open info window when marker is clicked
    // 마커 setContent 내용 논의 필요
    marker.addListener("click", () => {
      infoWindow.setContent(position.lat + ", " + position.lng);
      infoWindow.open(map, marker);
    });
    return marker;
  });

  // Add a marker clusterer to manage the markers.
  new MarkerClusterer({ markers, map });
}

const locations = [
  {
    lat: 37.4770896313732,
    lng: 126.963505817942,
  },
  {
    lat: 37.48702743532,
    lng: 127.059474850454,
  },
  {
    lat: 37.4812845008265,
    lng: 126.952695107942,
  },
  {
    lat: 37.6100441859992,
    lng: 126.930302239049,
  },
  {
    lat: 37.7962037866501,
    lng: 126.792563197953,
  },
  {
    lat: 37.5764929103816,
    lng: 126.985419169939,
  },
  {
    lat: 37.2603924025665,
    lng: 127.490307974918,
  },
  {
    lat: 37.535118053119,
    lng: 127.094722999066,
  },
  {
    lat: 37.5258305232222,
    lng: 126.896668349116,
  },
  {
    lat: 37.5590504141329,
    lng: 127.005296768227,
  },
  {
    lat: 37.5116083485804,
    lng: 127.08630073432,
  },
  {
    lat: 37.5347735014069,
    lng: 126.902607283905,
  },
  {
    lat: 37.5544909839515,
    lng: 127.010887137982,
  },
  {
    lat: 37.5597479688989,
    lng: 126.964484159441,
  },
  {
    lat: 37.6008031568325,
    lng: 126.935814422277,
  },
  {
    lat: 37.5111302556967,
    lng: 127.07383586044,
  },
  {
    lat: 37.549901442065,
    lng: 126.914447288631,
  },
  {
    lat: 37.548255518095,
    lng: 127.015820115311,
  },
  {
    lat: 37.5568635281461,
    lng: 126.923764988566,
  },
  {
    lat: 37.5887881726718,
    lng: 126.944158013369,
  },
  {
    lat: 37.5415518643708,
    lng: 127.017380201215,
  },
  {
    lat: 37.5264849726148,
    lng: 127.028486030642,
  },
  {
    lat: 37.5088119293814,
    lng: 127.063020940329,
  },
  {
    lat: 37.5698350860798,
    lng: 127.04706653169,
  },
  {
    lat: 37.5164314730183,
    lng: 127.02029272549,
  },
  {
    lat: 37.5175227396599,
    lng: 126.676805241489,
  },
  {
    lat: 37.5044937750958,
    lng: 127.048948120105,
  },
  {
    lat: 37.5202158982635,
    lng: 126.852876007423,
  },
  {
    lat: 37.648145025133,
    lng: 126.913836143165,
  },
  {
    lat: 37.6364177567586,
    lng: 126.918834712255,
  },
  {
    lat: 37.6191924317614,
    lng: 126.921096185129,
  },
  {
    lat: 37.5825560184073,
    lng: 126.950230958933,
  },
  {
    lat: 37.5744680801684,
    lng: 126.957911446269,
  },
  {
    lat: 37.5757880985498,
    lng: 126.973668718282,
  },
  {
    lat: 37.5704208439207,
    lng: 126.992144196794,
  },
  {
    lat: 37.5662761796769,
    lng: 126.990967458779,
  },
  {
    lat: 37.7452518938783,
    lng: 127.05698049092,
  },
  {
    lat: 37.5006600052986,
    lng: 127.036460414211,
  },
  {
    lat: 37.4980854411503,
    lng: 127.027977657727,
  },
  {
    lat: 37.4927359601279,
    lng: 127.013863444681,
  },
  {
    lat: 37.4814561264392,
    lng: 126.997535255649,
  },
  {
    lat: 37.4765532208396,
    lng: 126.981549541445,
  },
  {
    lat: 37.4824689098378,
    lng: 126.941682007426,
  },
  {
    lat: 37.4842644294274,
    lng: 126.929740854865,
  },
  {
    lat: 37.487641446009,
    lng: 126.913500702287,
  },
  {
    lat: 37.4852533671941,
    lng: 126.901473089504,
  },
  {
    lat: 37.5089048744726,
    lng: 126.891307981962,
  },
  {
    lat: 37.5179720940164,
    lng: 126.894756202452,
  },
  {
    lat: 37.5551954567089,
    lng: 126.936962654548,
  },
  {
    lat: 37.5568039038233,
    lng: 126.946422762684,
  },
  {
    lat: 37.5574025689432,
    lng: 126.956132861047,
  },
  {
    lat: 37.5128827106508,
    lng: 127.011401392881,
  },
  {
    lat: 37.5045398449292,
    lng: 127.005134579686,
  },
  {
    lat: 37.4927359601279,
    lng: 127.013863444681,
  },
  {
    lat: 37.4851852186355,
    lng: 127.016191235414,
  },
  {
    lat: 37.4845687081114,
    lng: 127.034146039501,
  },
  {
    lat: 37.4869250553702,
    lng: 127.046697871026,
  },
  {
    lat: 37.753979766402,
    lng: 127.077208439712,
  },
  {
    lat: 37.5322270449167,
    lng: 126.846426169396,
  },
  {
    lat: 37.5653372841193,
    lng: 126.977181235023,
  },
  {
    lat: 37.5660229020616,
    lng: 126.982183995362,
  },
  {
    lat: 37.5662761796769,
    lng: 126.990967458779,
  },
  {
    lat: 37.5666368996611,
    lng: 126.997623004003,
  },
  {
    lat: 37.5656454859141,
    lng: 127.008987189553,
  },
  {
    lat: 37.5656622427144,
    lng: 127.019468475358,
  },
  {
    lat: 37.5557087864257,
    lng: 127.04361716382,
  },
  {
    lat: 37.5472379579492,
    lng: 127.047369170783,
  },
  {
    lat: 37.5445852156774,
    lng: 127.056057944077,
  },
  {
    lat: 37.5403976062717,
    lng: 127.069202907348,
  },
  {
    lat: 37.537160863174,
    lng: 127.086171769557,
  },
  {
    lat: 37.5206944003696,
    lng: 127.103799674868,
  },
  {
    lat: 37.5133092702048,
    lng: 127.100215181119,
  },
  {
    lat: 37.5621209757458,
    lng: 127.050887278781,
  },
  {
    lat: 37.4909757841746,
    lng: 127.055497705714,
  },
  {
    lat: 37.4944858480401,
    lng: 127.063189830669,
  },
  {
    lat: 37.4968779978912,
    lng: 127.071153022687,
  },
  {
    lat: 37.4937011202813,
    lng: 127.079517936005,
  },
  {
    lat: 37.4839850708765,
    lng: 127.084120707858,
  },
  {
    lat: 37.4852843181606,
    lng: 127.10445168236,
  },
  {
    lat: 37.493092048704,
    lng: 127.118258210622,
  },
  {
    lat: 37.4959868949932,
    lng: 127.124482367866,
  },
  {
    lat: 37.5021280700015,
    lng: 127.127930582636,
  },
  {
    lat: 37.6702060357364,
    lng: 127.079048472278,
  },
  {
    lat: 37.6607133396972,
    lng: 127.073417091825,
  },
  {
    lat: 37.6563403562037,
    lng: 127.063440071354,
  },
  {
    lat: 37.653320494324,
    lng: 127.047640454654,
  },
  {
    lat: 37.6485317952362,
    lng: 127.034651559958,
  },
  {
    lat: 37.6378664771973,
    lng: 127.025492107399,
  },
  {
    lat: 37.6266400754021,
    lng: 127.026032022663,
  },
  {
    lat: 35.79871233,
    lng: 128.4893441,
  },
  //일본
  {
    lat: 36.077568,
    lng: 137.137973,
  },
  {
    lat: 36.75238,
    lng: 139.11105,
  },
  {
    lat: 34.973614,
    lng: 132.846529,
  },
  {
    lat: 33.423378,
    lng: 130.787129,
  },
  {
    lat: 33.700826,
    lng: 133.080832,
  },
  {
    lat: 33.577626,
    lng: 135.633501,
  },
  {
    lat: 35.386862,
    lng: 137.655905,
  },
  {
    lat: 35.386862,
    lng: 140.233238,
  },
  {
    lat: 36.037691,
    lng: 140.5292,
  },
  {
    lat: 40.164003,
    lng: 141.894344,
  },
  {
    lat: 36.404623,
    lng: 138.356062,
  },
  {
    lat: 35.949738,
    lng: 139.279898,
  },
  {
    lat: 35.867429,
    lng: 140.065159,
  },
  {
    lat: 37.313785,
    lng: 136.924116,
  },
  {
    lat: 35.65358,
    lng: 136.231589,
  },
  {
    lat: 35.232434,
    lng: 134.739426,
  },
  {
    lat: 36.332857,
    lng: 136.392904,
  },
  {
    lat: 35.127553,
    lng: 136.814522,
  },
  {
    lat: 35.823204,
    lng: 137.815408,
  },
  {
    lat: 35.013529,
    lng: 135.850299,
  },
  //중국
  {
    lat: 31.275235,
    lng: 120.948833,
  },
  {
    lat: 31.097946,
    lng: 121.665032,
  },
  {
    lat: 30.852202,
    lng: 120.61825,
  },
  {
    lat: 31.513192,
    lng: 121.066871,
  },
  {
    lat: 31.873703,
    lng: 121.328567,
  },
  {
    lat: 30.240469,
    lng: 114.287711,
  },
  {
    lat: 30.713024,
    lng: 114.998027,
  },
  {
    lat: 30.573644,
    lng: 114.088324,
  },
  {
    lat: 23.052323,
    lng: 113.502624,
  },
  {
    lat: 23.12706,
    lng: 112.622362,
  },
  {
    lat: 30.331629,
    lng: 103.771121,
  },
  {
    lat: 30.426408,
    lng: 104.364383,
  },
  {
    lat: 30.521095,
    lng: 104.606082,
  },
  {
    lat: 30.198784,
    lng: 110.055301,
  },
  {
    lat: 35.858652,
    lng: 104.597582,
  },
  {
    lat: 35.656921,
    lng: 103.851805,
  },
  //미국
  {
    lat: 38.989093,
    lng: -76.742251,
  },
  {
    lat: 38.818515,
    lng: -77.158902,
  },
  {
    lat: 39.028496,
    lng: -77.050471,
  },
  {
    lat: 39.033426,
    lng: -76.888634,
  },
  {
    lat: 35.985862,
    lng: -115.233132,
  },
  {
    lat: 36.827053,
    lng: -114.29245,
  },
  {
    lat: 34.009681,
    lng: -117.853745,
  },
  {
    lat: 34.026757,
    lng: -118.345904,
  },
  {
    lat: 37.784811,
    lng: -122.104383,
  },
  {
    lat: 40.688986,
    lng: -74.085739,
  },
  //독일
  {
    lat: 52.466261,
    lng: 13.355799,
  },
  {
    lat: 52.466261,
    lng: 13.437368,
  },
  {
    lat: 52.508836,
    lng: 13.215966,
  },
  {
    lat: 52.585535,
    lng: 13.294834,
  },
  {
    lat: 52.53962,
    lng: 13.480228,
  },
  {
    lat: 50.020679,
    lng: 8.507705,
  },
  {
    lat: 50.198584,
    lng: 8.765884,
  },
  {
    lat: 50.036559,
    lng: 8.848282,
  },
  {
    lat: 48.079971,
    lng: 11.532218,
  },
  {
    lat: 48.196686,
    lng: 11.604234,
  },
  //스웨덴
  {
    lat: 59.286507,
    lng: 18.077004,
  },
  {
    lat: 59.309428,
    lng: 18.017868,
  },
  {
    lat: 59.317688,
    lng: 18.075288,
  },
  {
    lat: 59.332826,
    lng: 18.085114,
  },
  {
    lat: 59.332728,
    lng: 18.035595,
  },
  {
    lat: 62.868896,
    lng: 17.75018,
  },
  {
    lat: 64.647501,
    lng: 20.938045,
  },
  {
    lat: 63.088516,
    lng: 14.523121,
  },
  //러시아
  {
    lat: 55.614895,
    lng: 37.75055,
  },
  {
    lat: 55.66694,
    lng: 37.690698,
  },
  {
    lat: 55.881882,
    lng: 37.391836,
  },
  {
    lat: 55.867223,
    lng: 38.211666,
  },
  {
    lat: 54.965025,
    lng: 60.786887,
  },
  {
    lat: 52.044801,
    lng: 104.319532,
  },
  {
    lat: 51.98047,
    lng: 113.883126,
  },
  //기타
  {
    lat: -16.159367,
    lng: -48.128851,
  },
  {
    lat: -12.002594,
    lng: -76.619964,
  },
  {
    lat: -33.960479,
    lng: -56.793452,
  },
  {
    lat: -0.923813,
    lng: 38.949778,
  },
  {
    lat: 9.180829,
    lng: -1.399154,
  },
  {
    lat: 25.231942,
    lng: 28.349635,
  },
  {
    lat: 21.3595,
    lng: 49.663901,
  },
  {
    lat: 31.835079,
    lng: 43.508979,
  },
  {
    lat: 30.861688,
    lng: 53.539222,
  },
  {
    lat: 53.17394,
    lng: -1.05721,
  },
  {
    lat: 48.778976,
    lng: 3.265215,
  },
  {
    lat: -27.617275,
    lng: 152.781299,
  },
  {
    lat: 18.956492,
    lng: -99.84126,
  },
];

const ClusterMap = () => {
  initMap();
  return <div id="map" style={{ width: "100%", height: "70vh" }}></div>;
};

export default ClusterMap;
